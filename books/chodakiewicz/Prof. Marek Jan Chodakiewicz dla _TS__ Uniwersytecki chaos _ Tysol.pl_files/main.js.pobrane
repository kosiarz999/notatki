var kedor;var jcrop_api;var reklamy_on = false;function getel(name){	return $$(name);}function $$() {	var elements = new Array();	for (var i = 0; i < arguments.length; i++)	{		var element = arguments[i];		if(typeof element == 'string') element = document.getElementById(element);		if(arguments.length == 1)  return element;		elements.push(element);	}	return elements;}// AJAX STARTS #################################################################################var toSend = Array(); // keeps awaiting ajax calls/* Create a new XMLHttpRequest object to talk to the Web server */var xmlHttp = false;var feedbackFunc = null;var disabledButton = '';var ajaxInProgress = false;//topProgressLab /*@cc_on @*//*@if (@_jscript_version >= 5)try {	  xmlHttp = new ActiveXObject('Msxml2.XMLHTTP');} catch (e) {	try {		xmlHttp = new ActiveXObject('Microsoft.XMLHTTP');	} catch (e2) {		xmlHttp = false;	}}@end @*/if(!xmlHttp && typeof XMLHttpRequest != 'undefined') xmlHttp = new XMLHttpRequest();// Wywołanie strony przez AJAXA z JSfunction callServer(url, feedBack, postData, disableButton){	if(typeof postData === 'undefined') postData = '';	if(typeof disableButton === 'undefined') disableButton = '';	// Open a connection to the server	if(ajaxInProgress==false && (xmlHttp.readyState==0 || xmlHttp.readyState==4) )	{		callUrl(url, feedBack, postData, disableButton);		document.body.style.cursor='progress';		$$('topProgress').style.visibility = "visible";		$$('topProgress').style.left = Math.floor(screen.width/2 - ($$('topProgress').offsetWidth)/2) + "px";		$$('topProgress').style.top  = Math.floor(screen.height/2 - ($$('topProgress').offsetHeight)/2 - 80) + "px";	}	else	{		toSend.push(new Array(url,feedBack,postData, disableButton));	}}// funkcja pomocniczafunction callUrl(url, feedBack, postData, disableButton){	xmlHttp.open('POST', url + '&_vcd=' + Math.floor(Math.random()*1000000), true);	// open connection	xmlHttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");	//xmlHttp.setRequestHeader("Content-length", postData.length);	//xmlHttp.setRequestHeader("Connection", "close");	feedbackFunc = feedBack;	if(disableButton!==undefined && disableButton!='')	{	//alert(disableButton);		disabledButton = disableButton;		$$( disabledButton ).disabled = 'disabled';	}	xmlHttp.onreadystatechange = updatePage;	// Setup a function for the server to run when it's done	//xmlHttp.setRequestHeader("Content-Type", "text/plain;charset=UTF-8");	ajaxInProgress = true;	xmlHttp.send(postData);							// Send the request}// feedback receive functionfunction updatePage(){	if(xmlHttp.readyState==4)	{		try {			if(disabledButton!==null && disabledButton!='')			{				$$( disabledButton ).disabled = '';				disabledButton = '';			}		}		catch(e) {}		if(feedbackFunc==null)		{			//alert(xmlHttp.responseText);			if(xmlHttp.responseText.substr(0, 7)=='ERRINFO')	// komunikat błędu			{				alert(xmlHttp.responseText.substr(10));			}			else			{				//alert(xmlHttp.responseText);				try { giveFeedback(xmlHttp.responseText); }  catch(e) {}			}		}		else	// indywidualna funkcja		{			//alert(xmlHttp.responseText);			feedbackFunc(xmlHttp.responseText);			feedbackFunc = null;		}		ajaxInProgress=false;		if( xmlHttp.readyState==0 || xmlHttp.readyState==4 )		{			if(toSend.length>0)			{				var tmp = toSend.shift();				callUrl(tmp[0],tmp[1],tmp[2],tmp[3]);			}			else			{				document.body.style.cursor='default';				$$('topProgress').style.visibility = "hidden";			}		}	}}// AJAX ENDS #################################################################################var lastColor = '';var lastClicked = '';var listName = '';function hl(el,id)	// highlight row{	if(el.style.backgroundColor=='#fec100' || el.style.backgroundColor=='rgb(254, 193, 0)' || el.style.backgroundColor=='#fec100' )	{		el.style.backgroundColor=lastColor;		lastClicked = '';		lastColor = '';		lastID = id;	}	else	{		if(lastClicked!='') lastClicked.style.backgroundColor = lastColor;		lastColor = el.style.backgroundColor;		el.style.backgroundColor='#fec100';		lastClicked = el;		lastID = id;		setCookie(listName + 'lastChecked', id);	}}function setCookie(c_name,value,expiredays,domain){	var exdate=new Date();	exdate.setTime(exdate.getTime()+expiredays);	document.cookie = c_name + "=" + encodeURIComponent(value) + 		((expiredays==null) ? "" : ";expires="+exdate.toGMTString()) + 		((domain!=undefined && domain) ? ";domain=" + domain : "" );}function getCookie(c_name){	if(document.cookie.length==0) return "";	c_start=document.cookie.indexOf(c_name + "=");	if(c_start==-1) return "";	c_start=c_start + c_name.length+1;	c_end=document.cookie.indexOf(";",c_start);	if(c_end==-1) c_end=document.cookie.length;	return decodeURIComponent(document.cookie.substring(c_start,c_end));}function getAjaxForm(el, form, c, params, parentList,confirmMsg){		try {		if(typeof confirmMsg!=='undefined' && confirmMsg!='')		{			if(confirm(confirmMsg)===false) return false;			else			{				try {					$('#' + form).remove();				}				catch(e) {}			}		}		else		{			try {				$('#' + form).remove();			}			catch(e) {}		}		callServer(url + 'receive.php?a=gf&f=' + form + '&i=' + USERID + '&parentList=' + parentList + '&c=' + c + params, 			function (str) {				if(str.substr(0, 3)=='ERR')				{					var tmp = str.split('#@#');					if(tmp[0]=='ERRINFO') alert(tmp[1]);					else if(tmp[0]=='ERR5') alert("Brak uprawnień");					else alert('Wystąpił błąd podczas pobierania danych. Spróbuj ponownie.');					return;				}				try {						$('#whole_wrapper').prepend(str);				}				catch(e) {}					positionForm(form);				//$(".form").draggable({ handle:"tr th.header", containment: "#nadole", scroll: true, stack: "#content table" });			}		);	}	catch(e) {}	return false;}function positionForm(form){	$$(form).style.margin='0';	$$(form).style.position='absolute';	$$(form).style.visibility='hidden';	$('#' + form).show(300, function(){		//console.log($('#' + form).width());				//console.log($('#' + form).height());		$('#container').css('min-height', $('#' + form).height()+60);				try {			$$(form).style.maxWidth = (screen.width-180) + 'px';			$$(form).style.maxHeight = ($(window).height() - 30) + 'px';		}		catch(e) {}		if(form=='zajetoscPokoi')		{			$$('zaj_pok').style.maxWidth = (screen.width-180) + 'px';			$$('zaj_pok').style.maxHeight = ($(window).height() - 190) + 'px';		}		if(form!='addPage')		{			var left = Math.max(Math.floor($(window).width() /2 - ($$(form).offsetWidth)/2), 0);			var top = Math.max(Math.floor($(window).height() /2 - ($$(form).offsetHeight)/2), 0);			$$(form).style.left = left + "px";			$$(form).style.top = top + "px";		}		else		{			var left = Math.max(Math.floor( $(window).width() /2 - ($$(form).offsetWidth)/2), 0);			var top = 60;			$$(form).style.left = left + "px";			$$(form).style.top = top + "px";		}		$$(form).style.zIndex = getNextzIndex();		$$('_tab_' + form).style.zIndex = getNextzIndex();		$('#' + form).hide(0);		$$(form).style.visibility='visible';		$('#' + form).show(300);	});}function positionFormEase(form){	$$(form).style.margin='0';	$$(form).style.position='absolute';	//$$(form).style.visibility='hidden';	$('#' + form).show(300, function(){		//console.log($('#' + form).width());				//console.log($('#' + form).height());		$('#container').css('min-height', $('#' + form).height()+60);				try {			$$(form).style.maxWidth = (screen.width-180) + 'px';			$$(form).style.maxHeight = ($(window).height() - 30) + 'px';		}		catch(e) {}		if(form!='addPage')		{			var left = Math.max(Math.floor($(window).width() /2 - ($$(form).offsetWidth)/2), 0);			var top = Math.max(Math.floor($(window).height() /2 - ($$(form).offsetHeight)/2), 0);			$$(form).style.left = left + "px";			$$(form).style.top = top + "px";		}		else		{			var left = Math.max(Math.floor( $(window).width() /2 - ($$(form).offsetWidth)/2), 0);			var top = 60;			$$(form).style.left = left + "px";			$$(form).style.top = top + "px";		}		$$(form).style.zIndex = getNextzIndex();		$$('_tab_' + form).style.zIndex = getNextzIndex();		//$('#' + form).hide(0);		//$$(form).style.visibility='visible';		//$('#' + form).show(300);	});}var highestZIndex = 101;   function getNextzIndex(){	highestZIndex++;	return highestZIndex;}//CZYSZCZENIE PODŚWIETLENIA ERRORÓWfunction clearForm(){	$('.fldError').attr('class', '');	try 	{ 		$('#emptyTip').text('');	}	catch(e){}}function checkInput(name, state, label, minSize, maxSize, errorLabelID){	if(minSize==undefined) minSize = 1;	if(maxSize==undefined) maxSize = 9999999999;	var id = $$(name);	if(id.value.length<minSize || id.value.length>maxSize) 	{ 		id.className = 'fldError';		if(state==true) 		{			id.focus(); 			if(typeof errorLabelID == 'undefined')	alert(label);			else			{				$$(errorLabelID).style.color = '#ff0000';				$$(errorLabelID).innerHTML = label; 				show_err(label);			}			state = false;		}	}	else	{		id.className = '';		$$(errorLabelID).innerHTML = '';	}	return state;}function checkSelect(name, state, label, errorLabelID){	var sel = document.getElementById(name);	var val = sel.options[sel.selectedIndex].value;	if(val=='')	{ 		sel.className = 'fldError';		if(state==true) 		{			sel.focus(); 			if(typeof errorLabelID === 'undefined')	alert(label); 			else			{				$$(errorLabelID).style.color = '#ff0000';				$$(errorLabelID).innerHTML = label; 				show_err(label);			}			state = false;		}	}	else sel.className = '';	return state;}function checkRadio(name, state, label, errorLabelID){	var sel = document.getElementsByName(name);	for(var i=0; i<sel.length; i++)	{		if(sel[i].checked==true)		{			sel[i].className = '';			return state;		}	}	sel[0].focus(); 	sel[0].className = 'fldError';	if(typeof errorLabelID === 'undefined')	alert(label); 	else	{		$$(errorLabelID).style.color = '#ff0000';		$$(errorLabelID).innerHTML = label; 		show_err(label);	}	state = false;	return state;}function eUC(str) { return encodeURIComponent(str); }// get radio button valuefunction getRadioValue(name){	var all = document.getElementsByName(name);	for(var i=0; i<all.length; i++)	{		if(all[i].checked) return all[i].value;	}	return false;}// get radio button valuefunction getCheckboxValue(id){	try {		var el = $$(id);		if(el.checked)return el.value;		else return '';	}	catch(e) {		return '';	}}function selectAll(checkbox){	var all = document.getElementsByName('selected');	var stan = checkbox.checked;	for(var i=0; i<all.length; i++) all[i].checked = stan;	return false;}function selectAllCheckboxes(checkbox, name){	var all = document.getElementsByClassName(name);	var stan = checkbox.checked;	for(var i=0; i<all.length; i++) all[i].checked = stan;	return false;}function delAjaxItem(el, act, c, params, parentList, confirmMsg){	try {		if(typeof confirmMsg!=='undefined' && confirmMsg!='')		{			if(confirm(confirmMsg)===false) return false;		}		callServer(url + 'receive.php?a=de&f=' + act + '&i=' + USERID + '&parentList=' + parentList + '&c=' + c + params, 			function (str) {				try {					if(str.substr(0, 3)=='ERR' && str.substr(0, 7)!='ERRINFO')					{						alert('Wystąpił błąd podczas wysyłania danych. Spróbuj ponownie.');						return false;					}					if(str.substr(0, 6)=='OKINFO')					{						if(act=='delWorkerPlace')						{							var tmpID = params.split('&');							var tmpID2 = tmpID[2].split('=');							updWorkerSelect(tmpID2[1]);						}						var tmp = str.split('#@#');						$(".bottominfo").remove();						delInfo(tmp[1]);					}					if(str.substr(0, 7)=='ERRINFO')					{						var tmp = str.split('#@#');						$(".bottominfo").remove();						delInfoErr(tmp[1]);					}					if(str.substr(0, 7)=='OKINFO2') window['refresh_' + placeListID](listPage);					if(parentList!='' && parentList!=='undefined') window['refresh_' + parentList](listPage);				}				catch(e) {}			}		);	}	catch(e) {}	return false;}function delInfo(txt){	showInfoBox(txt, 0);}function delInfoErr(txt){	showInfoBox(txt, 1);}var bottominfo_id = -1;var infobox_list = new Array();function showInfoBox(txt, type){	bottominfo_id++;	if(type == 0)	{		backgroundColor = "#ccffcc";		errImg = "i/tick_big.png";	}	else	{ 		backgroundColor = "#ffcccc";		errImg = "i/error_big.png";	}	$("#whole_wrapper").append("<div id='bottominfo"+bottominfo_id+"' class='bottominfo' style='display: none; left: 10px; bottom:36px; background-color:"+backgroundColor+"' onclick='UnTip(); $(this).closest(\"div\").remove()'>"		+'<table><tbody><tr><td><img src="'+errImg+'"></td><td style="width:100%">'		+'<img onclick="UnTip(); $(this).closest(\'div\').remove()" onmouseout="UnTip()" onmouseover="Tip(\'zamknij komunikat\')" class="ico" style="float:right" src="i/cross-button.png">'        +txt+'</td></tr></tbody></table></div>');	//$("#bottominfo"+bottominfo_id).css('bottom', bottominfo_id*42+'px').fadeIn('normal');	$("#bottominfo"+bottominfo_id).fadeIn('slow'); 	$("#bottominfo"+bottominfo_id).delay(15000).fadeOut('slow', 		function()		{			bottominfo_id-=1;			UnTip();			//$(".bottominfo").css('bottom', '-=42px');			$(this).remove();		});}function closeInfoBox(box){	bottominfo_id = 0;	UnTip();	$(box).closest("div").remove();}function showInfoOk(txt){	showInfoBox(txt, 0);}function showInfoErr(txt){	showInfoBox(txt, 1);}function change_nr_leg(el){	var id = $(el).val();	var legitka = $('#nr_legitymacji').val();	callServer(url + 'receive.php?a=getLegNr&i=' + USERID + '&id=' + id + '&legitymacja=' + legitka,	function (str) {		if(str.substr(0, 3)=='ERR')		{			var tmp = str.split('#@#');			if(tmp[0]=='ERRINFO') alert(tmp[1]);			else if(tmp[0]=='ERR5') alert("Brak uprawnień");			else alert('Wystąpił błąd podczas pobierania danych. Spróbuj ponownie.');			return;		}			try {				var tmp = str.split('#@#');			$('#nr_leg').html(tmp[1]);			$('#nr_regionu').val(tmp[3]);		}		catch(e) {}					});}function timeoutTick(){	if(timeOut>0)	{		try {			--timeOut;			if(Math.floor(timeOut/60)>5)			{				$$('leftToLogout').style.color="#FFFFFF";				$('#leftToLogout span').html("" + Math.floor(timeOut/60) + ":" + (timeOut%60<10 ? '0' : '') + timeOut%60);			}			else			{				$$('leftToLogout').style.color="#FF0000";				$('#leftToLogout span').html(""+Math.floor(timeOut/60) + ":" + (timeOut%60<10 ? '0' : '') + timeOut%60);			}				}		catch(e) {}	}/*	if(timeOut == 0)	{		var div = "<div style='z-index: 9999; background: url(i/transparent_black.png); position: fixed; top: 50%; left: 50%; width: 600px; height: 300px; margin: -150px 0 0 -300px;'><div style='width: 400px; height: 50px; position: absolute; top: 50%; margin-top: -25px; left: 50%; margin-left: -200px; color: #ffffff; text-align: center; font-size: 20px;'>Nastąpiło automatyczne wylogowanie.<br><a style='color: #ffffff;' href='login.php'>Zaloguj ponownie</a></div></div>";		$('#whole_wrapper').append(div);		--timeOut;	}*/}//setInterval("timeoutTick();", 1000);function podbicie_legitki(e){	var tresc = e.target.value;	e.target.value = '';	tresc = tresc.replace(/\D/g,'');	if(tresc.length==9)	{		var caly_numer = '20' + tresc;		var cyfry = caly_numer.split('');		for(var i=0; i<cyfry.length;i++) cyfry[i] = parseInt(cyfry[i]);		var kontrolna = 10-(cyfry[0]+cyfry[1]*3+cyfry[2]*7+cyfry[3]*9+cyfry[4]+cyfry[5]*3+cyfry[6]*7+cyfry[7]*9+cyfry[8]+cyfry[9]*3+cyfry[10]*7)%10;		if(kontrolna==10) kontrolna = 0;		tresc = '20' + tresc + kontrolna;	}	else if(tresc.length==12) tresc = tresc;	else return false;	console.log(tresc);	$("#to_update .numer_legitki input[name=hidden_nr]").each(function(){		if($(this).val() == tresc)		{			var row = $(this).closest("tr");			var id = $(this).closest('tr').find('input[name=id_legitymacji]').val();			callServer(url + 'receive.php?a=sf&f=extend&i=' + USERID + '&id=' + id,			function (str) {				if(str.substr(0, 3)=='ERR')				{					var tmp = str.split('#@#');					if(tmp[0]=='ERRINFO') alert(tmp[1]);					else if(tmp[0]=='ERR5') alert("Brak uprawnień");					else alert('Wystąpił błąd podczas pobierania danych. Spróbuj ponownie.');					return;				}				try {						console.log(row);					row.remove();					$("#updated tr:first").after(row);					$("#updated img").remove();					row.css("background-color", "#fec100");					row.animate({"background-color": "#FFFFFF"}, 2000);				}				catch(e) {}							});		}	});}function generuj_zlecenie(){	if($("input[name=selected]:checked").length>0)	{		var checkedValues = $('input[name=selected]:checked').map(function() {			return this.value;		}).get();		window.location = "prod?act=users&id=" + checkedValues;	}	else alert("Nie wybrano żadnej organizacji.");}function massBlockAcc(el, list, rodzaj){	if($("input[name=selected]:checked").length>0)	{		var checkedValues = $('input[name=selected]:checked').map(function() {			return this.value;		}).get();		return delAjaxItem(el,'delRU','','&id='+checkedValues+'&mass=1&rodzaj='+rodzaj, list,(rodzaj==1 ? 'Czy na pewno usunąć wybrane konta?' : 'Czy na pewno przywrócić wybrane konta?'))	}	else alert("Nie wybrano żadych kont użytkowników.");}function mass_del_rr(el, list, rodzaj){	if($("input[name=selected]:checked").length>0)	{		var checkedValues = $('input[name=selected]:checked').map(function() {			return this.value;		}).get();		return delAjaxItem(el,'delRR','','&id='+checkedValues+'&mass=1&rodzaj='+rodzaj, list, (rodzaj==0 ? 'Czy na pewno usunąć wybrane regiony?' : 'Czy na pewno przywrócić wybrane regiony?'))	}	else alert("Nie wybrano żadych regionów.");}function massDisable(el, list, rodzaj){	if($("input[name=selected]:checked").length>0)	{		var checkedValues = $('input[name=selected]:checked').map(function() {			return this.value;		}).get();		return delAjaxItem(el,'disableRU','','&id='+checkedValues+'&mass=1&rodzaj='+rodzaj, list, (rodzaj==0 ? 'Czy na pewno zablokować wybranych użytkowników?' : 'Czy na pewno odblokować wybranych użytkowników?'))	}	else alert("Nie wybrano żadych użytkowników.");}function mass_del_oz(el, list, rodzaj){	if($("input[name=selected]:checked").length>0)	{		var checkedValues = $('input[name=selected]:checked').map(function() {			return this.value;		}).get();		return delAjaxItem(el,'delROZ','','&id='+checkedValues+'&mass=1&rodzaj='+rodzaj, list, (rodzaj==0 ? 'Czy na pewno usunąć wybrane OZ?' : 'Czy na pewno przywrócić wybrane OZ?'))	}	else alert("Nie wybrano żadych OZ.");}function mass_del_rc(el, list, rodzaj){	if($("input[name=selected]:checked").length>0)	{		var checkedValues = $('input[name=selected]:checked').map(function() {			return this.value;		}).get();		return delAjaxItem(el,'delRC','','&id='+checkedValues+'&mass=1&rodzaj='+rodzaj, list, (rodzaj==1 ? 'Czy na pewno usunąć wybranych członków?' : 'Czy na pewno przywrócić wybranych członków?'))	}	else alert("Nie wybrano żadych członków.");}function show_err(msg){	var div = "<div class='bottominfo' id='bottominfoJava' onclick='$(this).closest(\"div\").remove()' style='bottom:36px; left:10px; " +		"background-color:#ffcccc;'><table><tr><td><img src='i/error_big.png' />" +		"</td><td style='width:100%'><img src='i/cross-button.png' style='float:right' class='ico' " + 		" onclick='$(this).closest(\"div\").remove()' /> " + msg +		"</td></tr></table></div>";	$('#whole_wrapper').append(div);	setTimeout(function() {        $("#bottominfoJava").remove();    }, 15000);}function show_ok(msg){	var div = "<div class='bottominfo' id='bottominfoJava' onclick='$(this).closest(\"div\").remove()' style='bottom:36px; left:10px; " +		"background-color:#ccffcc;'><table><tr><td><img src='i/tick_big.png' />" +		"</td><td style='width:100%'><img src='i/cross-button.png' style='float:right' class='ico' " + 		" onclick='$(this).closest(\"div\").remove()' /> " + msg +		"</td></tr></table></div>";	$('#whole_wrapper').append(div);	setTimeout(function() {        $("#bottominfoJava").remove();    }, 15000);}function delete_image(el, id, nazwa, yt){	try{		if(nazwa == 'kafelka') $('#id_kafelka').val('');		if(nazwa == 'zdjecie') $('#id_zdjecie').val('');		if(nazwa == 'reklamaPhoto') $('#reklamaPhoto').val('');		if(yt==='1') $('#link_do_yt').prop( 'disabled', false );	} catch(e){}	console.log(el);	//ajaxowe usunięcie plików (pliku oraz thumba) i wpisu w bazie	callServer(url + 'download.php?act=delete&id=' + id + '&nazwa=' + nazwa,	function (str) {		if(str.substr(0, 3)=='ERR')		{			var tmp = str.split('#@#');			if(tmp[0]=='ERRINFO') alert(tmp[1]);			else alert('Wystąpił błąd podczas pobierania danych. Spróbuj ponownie.');			return;		}		try {				$(el).parent('div').remove();		}		catch(e) {}					});}function countChar(val, count) {	console.log(count);	console.log($(val));	var len = val.value.length;	if (len > count) 	{		val.value = val.value.substring(0, count);	} 	else 	{		$(val).next('.charNum').text('Dozwolona ilość znaków: ' + len + '/' + (count));	}};function isNumeric(n) {  return !isNaN(parseFloat(n)) && isFinite(n);}function CustomControl(controlDiv, map) {    // Set CSS for the control border    var controlUI = document.createElement('div');	controlUI.id = 'customDraw';	controlUI.className  = 'customDraw';	controlUI.title = 'Wyznacz drogę';	$(controlDiv).append(controlUI);    // Setup the click event listeners    google.maps.event.addDomListener(controlUI, 'click', function () {        drawingManager.setDrawingMode(null);		if(droga_listener!=null) google.maps.event.removeListener(droga_listener);		droga_listener = google.maps.event.addListener(map, 'click', function(event) {		   addRoadMarker(event.latLng);		}); //dodaj event do stawiania markerów drogi    });}function addRoadMarker(location){	if(droga[0] == null) 	{		droga[0] = new google.maps.Marker({ position: location, map: map});	}	else if(droga[1] == null) 	{		droga[1] = new google.maps.Marker({ position: location, map: map});	}	else	{		droga[0].setMap(null);		droga[0] = droga[1];		droga[1] = new google.maps.Marker({ position: location, map: map});	}	if(droga[0]!=null && droga[1]!=null)	{		if(typeof existingShape!= 'undefined') existingShape.setMap(null);		delete marker;		var szer = ''; var dlug = '';		szer = droga[0].getPosition().lat() + ',' + droga[1].getPosition().lat();		dlug = droga[0].getPosition().lng() + ',' + droga[1].getPosition().lng();		$('#szerokosc_geo').val(szer);		$('#dlugosc_geo').val(dlug);		$('#rodzaj_rysunku').val('droga');		$('#google_latlng').val('droga');		calculateAndDisplayRoute(directionsService, directionsDisplay);	}}function calculateAndDisplayRoute(directionsService, directionsDisplay) {  directionsService.route({    origin: droga[0].getPosition().lat() + ',' + droga[0].getPosition().lng(),    destination: droga[1].getPosition().lat() + ',' + droga[1].getPosition().lng(),    travelMode: google.maps.TravelMode.DRIVING  }, function(response, status) {    if (status === google.maps.DirectionsStatus.OK) {      directionsDisplay.setDirections(response);	  directionsDisplay.setMap(map);	  droga[0].setMap(null);	  droga[1].setMap(null);    } else {      show_err('Błąd. Nie można odnaleźć drogi.')    }  });}function changeOnLine(ktore){	if(ktore==1)	{		$('#atrakcje').hide()		$('#pokoi1').text('pakietów');		$('#pokoi2').hide();		$('#pokoi3').text('pakiet');		$('#pokoi4').text('pakietu');		$('#pokoi5').hide();		$('#pokoi6').hide();	}	else	{		$('#atrakcje').show();		$('#pokoi1').text('pokoi');		$('#pokoi2').show();		$('#pokoi3').text('pokój');		$('#pokoi4').text('pokoju');		$('#pokoi5').show();		$('#pokoi6').show();	}}var SPECIAL_DAYS = {	0 : [ 13, 24 ],             // special days in January	2 : [ 1, 6, 8, 12, 18 ],    // special days in March	8 : [ 21, 11 ],             // special days in September   11 : [ 25, 28 ]              // special days in December};function dateIsSpecial(nazwaPola, date) {	var inputDate = new Date(date);	var todaysDate = new Date($('#'+nazwaPola).val());	if(inputDate.setHours(0,0,0,0) < todaysDate.setHours(0,0,0,0)) return true;	return false;};function ourDateStatusFunc(nazwaPola, date, y, m, d) {	if (dateIsSpecial(nazwaPola, date))		return true;	else		return false; // other dates are enabled		// return true if you want to disable other dates};function poWyborze(calendar, date){	$(calendar.params.inputField).val(date)	var name = $(calendar.params.inputField).attr('id').replace('_od', '_do');	Calendar.setup({ inputField: name, ifFormat: '%Y-%m-%d', showsTime: false, singleClick: true, step: 1, 		dateStatusFunc : (function(date, y, m, d) {			return ourDateStatusFunc($(calendar.params.inputField).attr('id'), date, y, m, d);	})});	if (calendar.dateClicked) {		calendar.callCloseHandler(); // this calls "onClose" (see above)	}}function checkNumerBank(el){	$('#errorBox').text('');	var numer_konta = $(el).val();	var numer_konta_tmp = '';	numer_konta = numer_konta.replace(/\D/g,'');	if(numer_konta.length == 26)	{		numer_konta_tmp = numer_konta.substr(0, 2) + ' ';		for(var i=2; i<26; i+=4) numer_konta_tmp += numer_konta.substr(i, 4) + ' ';		$(el).val(numer_konta_tmp.trim());		return true;	}	else 	{		$('#errorBox').text('Niepoprawny numer konta');		return false;	}}function changeKolejnosc(id, val, c){	//wysyłanie zmiany kolejności artykułów po kliknieciu w strzałkę	callServer(url + 'receive.php?a=changeKolejnosc&i=' + USERID + '&c=' + c + '&id=' + id + '&val=' + val, 		function (str) {			show_ok('Kolejnośc działów została zmieniona.');			window['refresh_' + listID]();		});}function kliknijLapka(val){	//wysyłanie podbicia artykułu kliknięciem	var idArtykul = $('#idArtykul').val();	callServer(url + 'receive_out.php?a=kliknijLapka&idArtykul=' + idArtykul + '&val=' + val, 		function (str) {			var klikniecia;			if(str.substring(0, 2) == 'OK')			{				var txt = str.split('@');				if(val == 1)				{					$('#lapkiGora').html(txt[1]);				}				else				{					$('#lapkiDol').html(txt[1]);				}				$('#lapkaUp').attr('src', 'i/off_like.png');				$('#lapkaDown').attr('src', 'i/off_like2.png');				$('#lapkaUp').removeAttr('onclick');				$('#lapkaDown').removeAttr('onclick');			}		});}function wyslijKomentarz(){	var idArtykul = $('#idArtykul').val();	var tresc = $('#tresc').val();	var nick = $('#nick').val();	callServer(url + 'receive_out.php?a=dodajKomentarz&idArtykul=' + idArtykul + '&tresc=' + tresc + '&nick=' + nick, 		function (str) {			if(str.substring(0, 2) == 'OK')			{				var txt = str.split('@');				//wstawiamy komentarz do listy komentarzy jako pierwszy na górze				$('#listaKomentarzy').prepend("<div class=\"kom\"><span class=\"komNaglowek\">" + txt[3] + " <span style=\"font-weight: bold;\">" + txt[1] + "</span> napisał:</span><p class=\"komTresc\">" + txt[2] + "</p></div>");				$('#koment_komunikat').text('Komentarz został dodany.').css('color', '#006400');				$('#tresc').val('');			}			else if(str.substring(0, 3) == 'ERR')			{				$('#tresc').focus();				var txt = str.split('@');				$('#koment_komunikat').text(txt[1]).css('color', '#ee0000');				//show_err(txt[1]);			}		});}function zamknijGalerie(){	//usuwany galerię	$('#galeryZdj').remove();	$('#galery').remove();	UnTip();	$('#closeButton').remove();}function pokazGalerie(){	var galeria = "<div id='galery'><div id='closeButton' onclick='zamknijGalerie();'><img onmouseover='Tip(\"Zamknij galerię\")' onmouseout='UnTip()' src='i/cancel_galery.png' class='ico' /></div></div>";	$('body').append(galeria);	var height = $('body').css('height');	$('#galery').css('height', height);	pobierzGaleria(1);}function pobierzGaleria(strona){	var idArtykul = $('#idArtykul').val();	callServer(url + 'receive_out.php?a=pobierzGaleria&idArtykul=' + idArtykul + '&val=' + strona, 		function (str) {			if(str.substring(0, 3) != 'ERR')			{				if($('#galeryZdj').length > 0)				{					$('#galeryZdj').remove();				}				$('body').append(str);				/*$('#galeryZdj').hide();				$('#galeryZdj').css('visibility', 'hidden');				$('#galeryZdj').show(200, function(){					var szerokosc = $('body').css('width');					szerokosc = szerokosc.slice(0, -2);					var szerokoscGalery = $('#galeryZdj').css('width');					console.log(szerokoscGalery);					szerokoscGalery = szerokoscGalery.slice(0, -2);					var leftGalery = Math.round(szerokosc / 2) - Math.round(szerokoscGalery / 2);					$('#galeryZdj').css('left', leftGalery + 'px');					$('#galeryZdj').css('visibility', 'visible');				});*/			}		});}function initJcrop(zmienna)//{{{{  // Hide any interface elements that require Jcrop  // (This is for the local user interface portion.)  // Invoke Jcrop in typical fashion  var ratio  if(zmienna=='image_kafelka') ratio = 1.5928;  if(zmienna=='image_zdjecie') ratio = 1.59965;  if(zmienna=='image_zdj_glowne') ratio = 1.5819;  $('.' + zmienna + ' img').Jcrop({	onSelect: function(c){		$('#x_kord_'+zmienna.substr(6)).val(c.x);		$('#y_kord_'+zmienna.substr(6)).val(c.y);		$('#w_kord_'+zmienna.substr(6)).val(c.w);		$('#h_kord_'+zmienna.substr(6)).val(c.h);		console.log("XXX" + zmienna.substr(6));	},	aspectRatio: ratio  },function(){	jcrop_api = this;  });};function checkCoords(pole){	if (parseInt($('#w_kord_'+pole).val())) return true;	alert('Proszę wybrać obszar na powyższym zdjęciu.');	return false;};function rescaleImage(pole){	if(checkCoords(pole) == false) return false;	var x = $('#x_kord_'+pole).val();	var y = $('#y_kord_'+pole).val();	var w = $('#w_kord_'+pole).val();	var h = $('#h_kord_'+pole).val();	var id = $('#id_' + pole).val();	//wyślij ajaxem kordy do pliku, phpem resizuj zdjęcie, oraz odśwież je w okienku.	callServer(url + 'download.php?act=reScale&id=' + id + '&x=' + x + '&y=' + y + '&w=' + w + '&h=' + h+ '&name=' + pole,	function (str) {		if(str.substr(0, 3)=='ERR')		{			var tmp = str.split('#@#');			if(tmp[0]=='ERRINFO') alert(tmp[1]);			else alert('Wystąpił błąd podczas przetwarzania. Spróbuj ponownie.');			return;		}		try {				//refresh image			d = new Date();			jcrop_api.destroy();			$("#buttonsave2_" + pole).hide();			$("#buttonsave1_" + pole).show();			$(".image_" + pole + " img").attr("src", "getimage.php?act="+pole+"&id="+id+"&" + d.getTime()).css('width', '').css('height', '');		}		catch(e) {}					});}